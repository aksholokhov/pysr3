<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pysr3.lme.problems module &mdash; PySR3 0.3.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pysr3.logger module" href="pysr3.logger.html" />
    <link rel="prev" title="pysr3.lme.priors module" href="pysr3.lme.priors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PySR3
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models_overview.html">Models Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developers</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../community_guidelines.html">Community Guidelines</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pysr3.html">pysr3 package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="pysr3.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pysr3.linear.html">pysr3.linear package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pysr3.lme.html">pysr3.lme package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pysr3.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="pysr3.html#module-pysr3">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PySR3</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">pysr3</a></li>
          <li class="breadcrumb-item"><a href="pysr3.html">pysr3 package</a></li>
          <li class="breadcrumb-item"><a href="pysr3.lme.html">pysr3.lme package</a></li>
      <li class="breadcrumb-item active">pysr3.lme.problems module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/pysr3.lme.problems.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pysr3.lme.problems">
<span id="pysr3-lme-problems-module"></span><h1>pysr3.lme.problems module<a class="headerlink" href="#module-pysr3.lme.problems" title="Permalink to this heading"></a></h1>
<p>Representations of datasets that are compatible with skmixed’s models</p>
<dl class="py class">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEProblem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pysr3.lme.problems.</span></span><span class="sig-name descname"><span class="pre">LMEProblem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fixed_features</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_features</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intercept_label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_of_objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">answers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fe_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">re_columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fe_regularization_weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">re_regularization_weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEProblem" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#pysr3.lme.problems.Problem" title="pysr3.lme.problems.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a></p>
<p>Helper class which implements Linear Mixed-Effects models’ abstractions over a given dataset.</p>
<p>It also can generate random problems with specific characteristics.</p>
<p>Constructor for LMEProblem class. It is meant to be used by library’s internals.
Check out class methods like from_x_y() and from_dataframe() below that are designed
to be used by users for creating LMEProblems.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEProblem.from_dataframe">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_effects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_effects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">not_regularized_fe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">not_regularized_re</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEProblem.from_dataframe" title="Permalink to this definition"></a></dt>
<dd><p>Creates LMEProblem from Pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em>) – Dataframe that contains all relevant data</p></li>
<li><p><strong>fixed_effects</strong> (<em>List[str]</em>) – List of column names that should be included as fixed effects</p></li>
<li><p><strong>random_effects</strong> (<em>List[str]</em>) – List of column names that should be included as random effects</p></li>
<li><p><strong>groups</strong> (<em>str</em>) – Name of the column that contains groups labels</p></li>
<li><p><strong>variance</strong> (<em>str</em>) – Name of the column that contains observation variances</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Name of the column that contains the target variable</p></li>
<li><p><strong>not_regularized_fe</strong> (<em>str</em>) – List of fixed effects which corresponding coefficients in the model are not penalized by
a sparsity-promoting regularizer. Does NOT guarantee that these features are going to be
included to the final model but significantly increases the chances of it.</p></li>
<li><p><strong>not_regularized_re</strong> (<em>str</em>) – List of random effects which corresponding coefficients in the model are not penalized by
a sparsity-promoting regularizer. Does NOT guarantee that these features are going to be
included to the final model but significantly increases the chances of it.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>LMEProblem</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEProblem.from_x_y">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_x_y</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns_labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_fixed_intercept</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_random_intercept</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">must_include_fe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">must_include_re</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEProblem.from_x_y" title="Permalink to this definition"></a></dt>
<dd><p>Transforms matrices x (data) and y(answers) into an instance of LMEProblem</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul>
<li><p><strong>x</strong> (<em>array-like, shape = [m,n]</em>) – Data.</p></li>
<li><p><strong>y</strong> (<em>array-like, shape = [m]</em>) – Answers.</p></li>
<li><p><strong>columns</strong> (<em>List[str]</em>) – List of columns names</p></li>
<li><p><strong>columns_labels</strong> (<em>List[str]</em>) –</p>
<p>List of column labels. There shall be only one column of group labels and answers STDs.</p>
<blockquote>
<div><ul>
<li><p>“fixed” : fixed effect</p></li>
<li><p>“random” : random effect</p></li>
<li><p>“fixed+random” : both fixed and random,</p></li>
<li><p>“group” : groups labels</p></li>
<li><p>“variance” : answers standard deviations</p></li>
<li><div class="line-block">
<div class="line">“intercept” : intercept column (fixed or random intercept is controlled by “fit_fixed_intercept”</div>
<div class="line">and “fit_random_intercept” respectively.</div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p><strong>fit_fixed_intercept</strong> (<em>bool, default = True</em>) – Whether to add an intercept as a fixed feature</p></li>
<li><p><strong>fit_random_intercept</strong> (<em>bool, default = True</em>) – Whether to add an intercept as a random feature.</p></li>
<li><p><strong>must_include_re</strong> (<em>List[str]</em>) – List of fixed effects for which any effect of sparsity-promoting regularizers
should be disabled. NB: it does not guarantee the inclusion of this feature
to the ultimate model.</p></li>
<li><p><strong>must_include_fe</strong> (<em>List[str]</em>) – Same for random effects</p></li>
<li><p><strong>kwargs</strong> – It’s not used now, but it’s left here for future.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>problem</strong> (<em>LMEProblem</em>) – an instance of LMEProblem build on the given data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEProblem.generate">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">groups_sizes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features_labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_fixed_intercept</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_random_intercept</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features_covariance_matrix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sized</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">true_random_effects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_x_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_true_model_coefficients</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generator_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chance_missing</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chance_outlier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outlier_multiplier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distribution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'normal'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEProblem.generate" title="Permalink to this definition"></a></dt>
<dd><p>Generates a random mixed-effects problem with given parameters.</p>
<p>The model is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Y_i</span> <span class="o">=</span> <span class="n">X_i</span><span class="o">*</span><span class="n">β</span> <span class="o">+</span> <span class="n">Z_i</span><span class="o">*</span><span class="n">u_i</span> <span class="o">+</span> <span class="n">𝜺_i</span><span class="p">,</span>

<span class="n">where</span>

<span class="n">u_i</span> <span class="o">~</span> <span class="n">𝒩</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">diag</span><span class="p">(</span><span class="n">𝛄</span><span class="p">)),</span>

<span class="n">𝜺_i</span> <span class="o">~</span> <span class="n">𝒩</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">diag</span><span class="p">(</span><span class="n">variance</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul>
<li><p><strong>groups_sizes</strong> (<em>List, Optional</em>) – List of groups sizes. If None then generates it from U[1, 1000]^k where k ~ U[1, 10]</p></li>
<li><p><strong>features_labels</strong> (<em>List, Optional</em>) – List of features labels which define whether a role of features in the problem: “fixed” – fixed only,
“random” – random only, “fixed+random” – both.
Does NOT include intercept (it’s handled with fit_random_intercept parameter).
If None then generates a random list from U[1, 4]^k where k ~ U[1, 10]</p></li>
<li><p><strong>fit_fixed_intercept</strong> (<em>bool, default is False</em>) –</p>
<dl class="simple">
<dt>If True then the model adds intercept to the set of fixed features. Intercept should not be</dt><dd><p>in the features_covariance_matrix or features_labels.</p>
</dd>
</dl>
</li>
<li><p><strong>fit_random_intercept</strong> (<em>bool, default is False</em>) –</p>
<dl class="simple">
<dt>True if the intercept is a random parameter as well. Intercept should never be</dt><dd><p>in the features_covariance_matrix or features_labels.</p>
</dd>
</dl>
</li>
<li><p><strong>features_covariance_matrix</strong> (<em>np.ndarray, Optional, Symmetric and PSD</em>) – Covariance matrix of the features from features labels (columns from the dataset to be generated).
If None then defaults to the identity matrix, in which case all features are independent.
Should be the size of len(features_labels).</p></li>
<li><p><strong>obs_var</strong> (<em>float or np.ndarray</em>) –</p>
<p>Variances of measurement errors. Can be:</p>
<blockquote>
<div><ul>
<li><p>float : In this case all errors for all groups have the same variance.</p></li>
<li><div class="line-block">
<div class="line">np.array of length equal to the number of groups : In this case each group has its own variance</div>
<div class="line">of the measurement errors, and it is the same for all objects within a group.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">stds : np.array of length equal to the number of objects in all groups cumulatively.</div>
<div class="line">In this case every object has its own variance.</div>
</div>
</li>
</ul>
</div></blockquote>
<p>Raise ValueError if obs_var has some other length then above.</p>
</li>
<li><p><strong>beta</strong> (<em>np.ndarray</em>) – True vector of fixed effects. Should be equal to the number of fixed features in the features_labels
plus one (intercept).
If None then it’s generated randomly from U[0, 1]^k where k is the number of fixed features plus intercept.</p></li>
<li><p><strong>gamma</strong> (<em>np.ndarray</em>) – True vector of random effects. Should be equal to the number of random features in the features_labels
plus one if fit_random_intercept is True.
If None then it’s generated randomly from U[0, 1]^k where k is the number of random effects plus (maybe)
intercept.</p></li>
<li><p><strong>true_random_effects</strong> (<em>np.ndarray</em>) – True random effects. Should be of a shape=(m, k) where m is the length of gamma, k is the number of groups.
If None then generated according to the model: u_i ~ 𝒩(0, diag(𝛄)).</p></li>
<li><p><strong>as_x_y</strong> (<em>bool, default is False</em>) – If True, returns the data in the form of tuple of matrices (X, y). Otherwise returns an instance
of the respective class.</p></li>
<li><p><strong>return_true_model_coefficients</strong> (<em>bool, default is True</em>) – If True, the second return argument is a dict with true model coefficients: beta, gamma, random effects and
true values of measurements errors, otherwise returns None.</p></li>
<li><p><strong>seed</strong> (<em>int, default is None</em>) – If given, initializes the global Numpy random generator with this seed.</p></li>
<li><p><strong>generator_params</strong> (<em>dict</em>) – Dictionary with the parameters of the problem generator,
like min-max bounds for the number of groups and objects.
If None then the default one is used (see at the beginning of this file).</p></li>
<li><p><strong>distribution</strong> (<em>str</em>) – which distribution is used for generating features: “normal” or “uniform”</p></li>
<li><p><strong>chance_outlier</strong> (<em>float, from 0 to 1</em>) – chance that a selected value in data matrix is an outlier. If so, it gets
multiplied by outlier_multiplier</p></li>
<li><p><strong>outlier_multiplier</strong> (<em>float</em>) – magnitude of the outliers</p></li>
<li><p><strong>chance_missing</strong> (<em>float, from 0 to 1</em>) – chance that a selected value is going to be missing from the dataset,
in which case it’s set to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul>
<li><p><strong>problem</strong> (<em>LMEProblem</em>) – Generated problem</p></li>
<li><p><strong>true_parameters</strong> (<em>dict, optional</em>) –</p>
<p>True parameters for generated problem:</p>
<blockquote>
<div><ul class="simple">
<li><p>”beta” : true beta,</p></li>
<li><p>”gamma” : true gamma,</p></li>
<li><p>”per_group_coefficients”: true per group coefficients (b such that y = Xb, where X is from to_x_y())</p></li>
<li><p>”active_categorical_set”: set of categorical features which were used for true latent group division</p></li>
<li><p>”true_group_labels”: labels from true latent group division</p></li>
<li><p>”random_effects”: true random effects</p></li>
<li><p>”errors”: true errors</p></li>
<li><p>”true_rmse”: loss value when true beta, gamma and random effects are used.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEProblem.to_dataframe">
<span class="sig-name descname"><span class="pre">to_dataframe</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEProblem.to_dataframe" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEProblem.to_x_y">
<span class="sig-name descname"><span class="pre">to_x_y</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#pysr3.lme.problems.LMEProblem.to_x_y" title="Permalink to this definition"></a></dt>
<dd><p>Transforms the problem to the (X, y) form.</p>
<p>The first row of X is going to be features labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>X</strong> (<em>np.ndarray</em>) – Features as a matrix</p></li>
<li><p><strong>y</strong> (<em>np.ndarray</em>) – Answer as a vector</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEStratifiedShuffleSplit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pysr3.lme.problems.</span></span><span class="sig-name descname"><span class="pre">LMEStratifiedShuffleSplit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns_labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">42</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_splits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEStratifiedShuffleSplit" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class that generates shuffle splits of the dataset that are stratified by groups</p>
<p>Creates LMEStratifiedShuffleSplit</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul>
<li><p><strong>columns_labels</strong> (<em>List[str]</em>) –</p>
<p>List of column labels. There shall be only one column of group labels and answers STDs.</p>
<blockquote>
<div><ul>
<li><p>“fixed” : fixed effect</p></li>
<li><p>“random” : random effect</p></li>
<li><p>“fixed+random” : both fixed and random,</p></li>
<li><p>“group” : groups labels</p></li>
<li><p>“variance” : answers standard deviations</p></li>
<li><div class="line-block">
<div class="line">“intercept” : intercept column (fixed or random intercept is controlled by “fit_fixed_intercept”</div>
<div class="line">and “fit_random_intercept” respectively.</div>
</div>
</li>
</ul>
</div></blockquote>
</li>
<li><p><strong>random_state</strong> (<em>int</em>) – Random seed for the generator</p></li>
<li><p><strong>test_size</strong> (<em>float, between 0 and 1</em>) – fraction of the dataset for the test part of splits</p></li>
<li><p><strong>n_splits</strong> (<em>int</em>) – number of splits</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEStratifiedShuffleSplit.get_n_splits">
<span class="sig-name descname"><span class="pre">get_n_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEStratifiedShuffleSplit.get_n_splits" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.LMEStratifiedShuffleSplit.split">
<span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.LMEStratifiedShuffleSplit.split" title="Permalink to this definition"></a></dt>
<dd><p>Generates splits</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>ndarray, (n, p)</em>) – data matrix</p></li>
<li><p><strong>y</strong> (<em>ndarray (n, )</em>) – target variable</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterable over tuples (X_train, y_train, X_test, y_test) that are stratified by the group</em></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pysr3.lme.problems.Problem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pysr3.lme.problems.</span></span><span class="sig-name descname"><span class="pre">Problem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.Problem" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Template class for various representations of datasets.</p>
<p>Initializes the class
:Parameters: <strong>kwargs</strong> – anything needed</p>
<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.Problem.from_x_y">
<span class="sig-name descname"><span class="pre">from_x_y</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.Problem.from_x_y" title="Permalink to this definition"></a></dt>
<dd><p>Creates Problem from matrices X and Y</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>ndarray, (n, p)</em>) – data matrix</p></li>
<li><p><strong>y</strong> (<em>ndarray (n, )</em>) – target variable</p></li>
<li><p><strong>kwargs</strong> – anything needed</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Problem</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pysr3.lme.problems.Problem.to_x_y">
<span class="sig-name descname"><span class="pre">to_x_y</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.Problem.to_x_y" title="Permalink to this definition"></a></dt>
<dd><p>Converts its internal representation into the (X, y) dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> – anything needed</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Matrices X (n, p) and y (n, )</em></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pysr3.lme.problems.get_per_group_coefficients">
<span class="sig-prename descclassname"><span class="pre">pysr3.lme.problems.</span></span><span class="sig-name descname"><span class="pre">get_per_group_coefficients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_effects</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.get_per_group_coefficients" title="Permalink to this definition"></a></dt>
<dd><p>Derives per group coefficients from the vectors of fixed and per-cluster random effects.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul>
<li><p><strong>beta</strong> (<em>ndarray, shape=(n,), n is the number of fixed effects.</em>) – Vector of fixed effects.</p></li>
<li><p><strong>random_effects</strong> (<em>ndarray or list, shape=(m, k), m groups, k random effects.</em>) – Array of random effects.</p></li>
<li><p><strong>labels</strong> (<em>List[str]</em>) –</p>
<p>List of column labels. There shall be only one column of group labels and answers STDs.</p>
<blockquote>
<div><ul>
<li><p>“fixed” : fixed effect</p></li>
<li><p>“random” : random effect</p></li>
<li><p>“fixed+random” : both fixed and random,</p></li>
<li><p>“group” : groups labels</p></li>
<li><p>“variance” : answers standard deviations</p></li>
<li><div class="line-block">
<div class="line">“intercept” : intercept column (fixed or random intercept is controlled by “fit_fixed_intercept”</div>
<div class="line">and “fit_random_intercept” respectively.</div>
</div>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>per_group_coefficients</strong> (<em>ndarray, shape=(m, t)</em>) – Array of cluster coefficients: m clusters times t coefficients.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pysr3.lme.problems.random_effects_to_matrix">
<span class="sig-prename descclassname"><span class="pre">pysr3.lme.problems.</span></span><span class="sig-name descname"><span class="pre">random_effects_to_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_effects</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pysr3.lme.problems.random_effects_to_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Stacks a list of tuples (group: random effects) into an array</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>random_effects</strong> (<em>List[Tuple[Any, ndarray]]</em>) – List of random effects in the format [(group1: effect1), (group2: effects2), …]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><em>ndarray of random effects stacked vertically</em></p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pysr3.lme.priors.html" class="btn btn-neutral float-left" title="pysr3.lme.priors module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pysr3.logger.html" class="btn btn-neutral float-right" title="pysr3.logger module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Aleksei Sholokhov.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>